<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë°©</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js"></script>
  <script src="https://accounts.google.com/gsi/client" defer></script>
  <script src="https://apis.google.com/js/api.js" defer></script>
  <style>
    body { font-family: sans-serif; }
    #canvas-container { position: relative; margin-bottom: 10px; }
    #c { border: 1px solid #ccc; }
    #shop { margin-bottom: 10px; }
    .shop-item { width: 60px; cursor: grab; margin-right: 5px; }
    #controls { margin-bottom: 10px; }
    #controls input, #controls button { margin-right: 5px; }
  </style>
  <meta http-equiv="Content-Security-Policy"
      content="
        default-src 'self' data:;
        style-src 'self' 'unsafe-inline';
        script-src 'self' 'unsafe-inline' 'unsafe-eval'
                    https://apis.google.com
                    https://accounts.google.com
                    https://www.gstatic.com;
        frame-src https://accounts.google.com
                  https://www.gstatic.com
                  https://content-sheets.googleapis.com;
      ">

</head>
<body>
  <script>
    // ë¡œê·¸ì¸ ì²´í¬
    if (!localStorage.getItem('userId')) {
      alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤!');
      window.location.href = 'index.html';
    }
  </script>

  <h2>ğŸª‘ ë°© ê¾¸ë¯¸ê¸° ì‹œë®¬ë ˆì´í„° V.0.3.1</h2>

  <div id="canvas-container">
    <canvas id="c" width="800" height="500"></canvas>
  </div>

  <div id="shop">
    <h3>ê°€êµ¬ ëª©ë¡</h3>
  </div>

  <div id="controls">
    <label>ë°°ì¹˜ ìš°ì„ ë„: <input id="zIndex" type="number" min="1" disabled></label>
    <button id="deleteBtn" disabled>ì‚­ì œ</button>
    <button id="saveBtn">ğŸ’¾ ì €ì¥</button>
    <button id="loadBtn">ğŸ“‚ ë¶ˆëŸ¬ì˜¤ê¸°</button>
  </div>

  <button id="authBtn">Google ê¶Œí•œ ìš”ì²­</button>
  <script>
    document.getElementById('authBtn').addEventListener('click', () => {
      // ì´ë¯¸ í† í°ì´ ìˆìœ¼ë©´ ë°”ë¡œ ë¦¬í„´
      if (accessToken) return;
      tokenClient.requestAccessToken();
    });
  </script>

  <script src="script.js"></script>
</body>
</html>
